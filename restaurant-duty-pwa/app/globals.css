@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Restaurant Duty PWA - Global Styles
   iPad-first design with 44px+ touch targets
   ============================================ */

@layer base {
  /* Prevent text selection on touch (better UX for checkboxes) */
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }
  
  /* Allow text selection in inputs */
  input, textarea {
    -webkit-user-select: text;
    user-select: text;
  }
  
  /* Base font settings */
  html {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
                 'Helvetica Neue', Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Prevent overscroll/bounce on iOS */
  html, body {
    overscroll-behavior: none;
    overflow-x: hidden;
  }
  
  /* Full height on mobile */
  body {
    min-height: 100vh;
    min-height: -webkit-fill-available;
  }
  
  /* Improve focus visibility for accessibility */
  :focus-visible {
    outline: 3px solid theme('colors.blue.500');
    outline-offset: 2px;
  }
}

@layer components {
  /* Touch-friendly button base */
  .btn-touch {
    @apply min-h-[44px] min-w-[44px] px-4 py-2
           inline-flex items-center justify-center
           font-medium rounded-xl
           transition-all duration-200
           touch-manipulation
           active:scale-[0.98];
  }
  
  /* Primary button */
  .btn-primary {
    @apply btn-touch bg-blue-600 text-white
           hover:bg-blue-700 active:bg-blue-800
           shadow-sm hover:shadow-md;
  }
  
  /* Secondary button */
  .btn-secondary {
    @apply btn-touch bg-gray-100 text-gray-700
           hover:bg-gray-200 active:bg-gray-300
           border border-gray-200;
  }
  
  /* Danger button */
  .btn-danger {
    @apply btn-touch bg-red-600 text-white
           hover:bg-red-700 active:bg-red-800;
  }
  
  /* Touch-friendly checkbox container */
  .checkbox-touch {
    @apply min-h-[48px] flex items-center gap-3
           px-4 py-3 rounded-xl
           bg-white border-2 border-gray-200
           transition-all duration-200
           touch-manipulation cursor-pointer
           hover:border-gray-300;
  }
  
  .checkbox-touch.checked {
    @apply bg-green-50 border-green-500;
  }
  
  .checkbox-touch.not-done {
    @apply bg-red-50 border-red-500;
  }
  
  .checkbox-touch.na {
    @apply bg-gray-100 border-gray-400;
  }
  
  /* Card component */
  .card {
    @apply bg-white rounded-2xl shadow-card
           border border-gray-100
           overflow-hidden;
  }
  
  .card-interactive {
    @apply card cursor-pointer
           transition-all duration-200
           hover:shadow-card-hover hover:border-gray-200
           active:scale-[0.99];
  }
  
  /* Input fields */
  .input-touch {
    @apply w-full h-12 px-4
           text-base
           bg-white border-2 border-gray-200
           rounded-xl
           transition-all duration-200
           focus:border-blue-500 focus:ring-4 focus:ring-blue-100
           focus:outline-none
           placeholder:text-gray-400;
  }
  
  /* Template cards */
  .template-card {
    @apply card-interactive p-6
           flex flex-col gap-3;
  }
  
  .template-card .icon {
    @apply w-14 h-14 rounded-xl
           flex items-center justify-center
           text-white text-2xl;
  }
  
  /* Progress bar */
  .progress-bar {
    @apply h-2 bg-gray-200 rounded-full overflow-hidden;
  }
  
  .progress-bar-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
  }
  
  /* Section header */
  .section-header {
    @apply sticky top-0 z-10
           px-4 py-3
           bg-gray-50/95 backdrop-blur-sm
           border-b border-gray-200
           font-semibold text-gray-700;
  }
  
  /* Status badges */
  .badge {
    @apply inline-flex items-center gap-1.5
           px-2.5 py-1 rounded-full
           text-xs font-medium;
  }
  
  .badge-success {
    @apply badge bg-green-100 text-green-700;
  }
  
  .badge-warning {
    @apply badge bg-amber-100 text-amber-700;
  }
  
  .badge-danger {
    @apply badge bg-red-100 text-red-700;
  }
  
  .badge-info {
    @apply badge bg-blue-100 text-blue-700;
  }
  
  /* Sync status indicator */
  .sync-indicator {
    @apply w-3 h-3 rounded-full;
  }
  
  .sync-indicator.synced {
    @apply bg-green-500;
  }
  
  .sync-indicator.pending {
    @apply bg-amber-500 animate-pulse;
  }
  
  .sync-indicator.failed {
    @apply bg-red-500;
  }
}

@layer utilities {
  /* Safe area padding for notched devices */
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Touch manipulation for better touch response */
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  /* Prevent text selection */
  .select-none {
    -webkit-user-select: none;
    user-select: none;
  }
}

/* ============================================
   Animations
   ============================================ */

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(16px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideDown {
  from {
    transform: translateY(-16px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes scaleIn {
  from {
    transform: scale(0.95);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes checkmark {
  0% {
    transform: scale(0);
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fadeIn 0.2s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

.animate-slide-down {
  animation: slideDown 0.3s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

.animate-checkmark {
  animation: checkmark 0.3s ease-out;
}

/* ============================================
   PWA Install Prompt
   ============================================ */

.pwa-install-prompt {
  @apply fixed bottom-4 left-4 right-4
         p-4 rounded-2xl
         bg-blue-600 text-white
         shadow-lg
         animate-slide-up
         safe-area-inset;
}

/* ============================================
   Offline Indicator
   ============================================ */

.offline-banner {
  @apply fixed top-0 left-0 right-0
         py-2 px-4
         bg-amber-500 text-white text-center
         text-sm font-medium
         animate-slide-down
         z-50;
}
